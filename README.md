# ufanet-pool-api

## Сборка проекта
В папке `./dev` выполнить:
```
docker-compose up -d
```

P.S. Для локального запуска скопировать содержимое файла `./dev/.env.example` в `./dev/.env`

# Задача
Реализовать REST API для организации работы бассейна (регистрация клиентов, работа с записями на посещение)

Дискретность записи - 1 час (т.е. можно записываться на 10:00, 11:00 итд, запись на час)

**Обязательные требования к реализации:**
- Возможность записаться только на рабочее время
- Ограничение на количество записей в час (допустим не более 10 человек)
- Описание структуры таблиц в БД
- Реализация работы с базой данных должна быть выполнена на чистом JDBC, без использования ORM-фреймворков (таких как Hibernate, JPA и т.п.)

**Необязательные пожелания:**
- Поиск записей по ФИО
- Отдельные графики для праздничных дней
- Ограничение на количество записей в день на человека (допустим не более 1-го посещения в день)
- Возможность записи на несколько часов подряд

## Требования к API

### API для работы с клиентами

#### 1. GET /api/v0/pool/clients

##### Описание
Получение списка клиентов бассейна

##### Структура ответа
```
[{
    "id": number,
    "name": string
}]
```

#### 2. GET /api/v0/pool/clients/{id}

##### Описание
Получение данных о клиенте

##### Входные данные
```
    id: number
```

##### Структура ответа
```
{
    "id": number,
    "name": string,
    "phone": string,
    "email": string
}
```

#### 3. POST /api/v0/pool/clients

##### Описание
Добавление нового клиента

##### Структура входных данных (body)
```
{
    "name": string,
    "phone": string,
    "email": string
}    
```

#### 4. PATCH /api/v0/pool/clients/{id}

##### Описание
Обновление данных о клиенте

##### Структура входных данных (body)
```
{
    "name": string,
    "phone": string,
    "email": string
}    
```

### API для работы с записями

#### 1. GET /api/v0/pool/time-slots/available

##### Описание
Получение доступных записей на определенную дату

##### Входные данные
```
    date: string
```

##### Выходные данные
```
[{
    "time": string,
    "count": number //Количество доступных записей в указанный время 
}]
```

#### 2. GET /api/v0/pool/reservations

##### Описание
Получение занятых записей на определенную дату

##### Входные данные
```
    date: string
```

##### Структура ответа
```
[{
    "time": string,
    "count": number, //Количество занятых записей в указанное время
    "clients": [{
        "id": number,
        "name": string,
        "phone": string,
        "email": string
    }]
}]
```

#### 3. POST /api/v0/pool/reservations

##### Описание
Добавить запись клиента на определенное время

##### Структура входных данных (body)
```
{
    "clientId": number,
    "datetime": string
}
```

##### Выходные данные
```
{
    "id": string //Идентификатор записи
}
```

#### 4. POST /api/v0/pool/reservations/{id}/cancel

##### Описание
Отмена записи клиента на определенное время

##### Структура входных данных (body)
```
{
    "clientId": number,
    "reason": string
}
```
